/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package code;

import org.junit.Test;
import java.math.BigInteger;
import java.util.ArrayList;

import static org.hamcrest.CoreMatchers.is;
import static org.hamcrest.MatcherAssert.assertThat;

public class AppTest {

    @Test
    public void testCountMinUpdate(){

        //Create heavy hitter object
        NewHeavyHitters hh = new NewHeavyHitters(5);

        //Initialize 32 HH count mins
        hh.cms = new CountMinSketch[32];
        for(int i = 0; i<32; i++){
             hh.cms[i] = new CountMinSketch(20, 15, 1000003);
        }

        //Adds two items to every countMin in HH
        for(CountMinSketch cm : hh.cms){
            cm.add(0, 0);
            cm.add(1, 0);
            cm.add(2, 0);
            cm.add(3, 0);
            cm.add(4, 0);
            cm.add(5, 0);
            cm.add(6, 0);
            cm.add(7, 0);

        }

        //Update heavy hitter
        hh.update(7, 1);


        // Check values of heavy hitter count mins
        int index = 0;
        for(CountMinSketch cm : hh.cms){
            System.out.println("--------This is cm number " + index + "------------------");
            System.out.println("Count min 0 -->" + cm.estimateCount(0));
            System.out.println("Count min 1 -->" + cm.estimateCount(1));
            System.out.println("Count min 2 -->" + cm.estimateCount(2));
            System.out.println("Count min 3 -->" + cm.estimateCount(3));
            System.out.println("Count min 4 -->" + cm.estimateCount(4));
            System.out.println("Count min 5 -->" + cm.estimateCount(5));
            System.out.println("Count min 6 -->" + cm.estimateCount(6));
            System.out.println("Count min 7 -->" + cm.estimateCount(7));
            index++;
        }



    }




}
